<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RoosyCozy Beta | Project Essential Record</title>
  
  <link rel="stylesheet" href="beta.css" />
  <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Noto+Serif+KR:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <section id="login-screen" class="full-screen-center">
    <div class="login-card">
      <div class="logo-area"><span class="logo-dot"></span> RoosyCozy Beta</div>
      <h1 class="login-title">Project<br>Essential Record</h1>
      <p class="login-desc">ë² íƒ€ ì•¡ì„¸ìŠ¤ ì½”ë“œë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.</p>
      
      <div class="input-group">
        <input type="text" id="accessCode" placeholder="RC-BETA-000" autocomplete="off" />
        <button onclick="attemptLogin()" class="btn-primary">ì…ì¥í•˜ê¸°</button>
      </div>
      <p id="login-msg" class="error-msg"></p>
    </div>
  </section>

  <main id="dashboard" style="display: none;">
    <header class="beta-header">
      <div class="container header-inner">
        <div class="user-info">
          <span class="user-badge">BETA TESTER</span>
          <strong id="user-id-display">RC-BETA-XXX</strong>
        </div>
        <div class="progress-area">
          <span>ì§„í–‰ë¥ </span>
          <div class="progress-track"><div class="progress-bar" id="progressBar" style="width: 0%;"></div></div>
          <span id="progress-text">0%</span>
        </div>
      </div>
    </header>

    <section class="welcome-sec container">
      <h2 class="wc-title">ê¸°ë¡ì˜ ë³¸ì§ˆì— ì§‘ì¤‘í•˜ì„¸ìš”.</h2>
      <p class="wc-desc">ë°˜ê°‘ìŠµë‹ˆë‹¤, ì„ ìƒë‹˜. ì‹¤ì œ ì•± í™”ë©´ì„ ë³´ë©° ì•„ë˜ ë¯¸ì…˜ì„ ìˆœì„œëŒ€ë¡œ ìˆ˜í–‰í•´ ì£¼ì„¸ìš”.<br><strong>ì •ë‹µì„ ë§ì¶°ì•¼ ë‹¤ìŒ ë‹¨ê³„ê°€ ì—´ë¦½ë‹ˆë‹¤.</strong></p>
    </section>

    <section class="mission-track container">
      
      <div class="mission-card active" id="mission-1">
        <div class="m-status">STEP 01</div>
        <div class="m-content">
          <h3>3ì´ˆ ì»·! 'ë‹¨ì¶•í‚¤'ë¡œ ê¸°ë¡ ë‚¨ê¸°ê¸°</h3>
          <p>
            [ê¸°ì´ˆ ê¸°ë¡ ë§Œë“¤ê¸°] íƒ­ì—ì„œ <strong>'í•™ìƒ 1ë²ˆ'</strong>ì„ ì„ íƒí•˜ê³  ë‚´ìš©ì„ ì…ë ¥í•´ ë³´ì„¸ìš”.<br>
            ê·¸ë¦¬ê³  ë§ˆìš°ìŠ¤ ëŒ€ì‹  <strong>í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤</strong>ë¡œ ì €ì¥í•´ ë³´ì„¸ìš”.
          </p>
          
          <div class="m-action-area">
            <a href="index.html" target="_blank" class="btn-outline small">ì•± ì‹¤í–‰í•˜ëŸ¬ ê°€ê¸° (ìƒˆì°½)</a>
            
            <div class="interaction-box">
              <p class="q-label">Q. ë°©ê¸ˆ ì €ì¥í•  ë•Œ ë§ˆìš°ìŠ¤ë¥¼ ì“°ì…¨ë‚˜ìš”?</p>
              <div class="choice-group" id="q1-options">
                <button onclick="selectOption(1, 'mouse')" class="choice-btn">ğŸ–±ï¸ ë„¤, 'ì €ì¥' ë²„íŠ¼ì„ í´ë¦­í–ˆì–´ìš”</button>
                <button onclick="selectOption(1, 'shortcut')" class="choice-btn">âš¡ ì•„ë‹ˆìš”, Ctrl+Enterë¡œ ì €ì¥í–ˆì–´ìš”</button>
              </div>
              <button onclick="completeMission(1)" id="btn-complete-1" class="btn-check" disabled>ì •ë‹µì„ ì„ íƒí•˜ì„¸ìš”</button>
            </div>
          </div>
        </div>
      </div>

      <div class="mission-card locked" id="mission-2">
        <div class="m-status">STEP 02</div>
        <div class="m-content">
          <h3>AIê°€ ì°¾ì•„ë‚¸ 'ìˆ¨ì€ ì¡°ì–¸' í™•ì¸í•˜ê¸°</h3>
          <p>
            ìƒë‹¨ì˜ íŒŒë€ìƒ‰ <strong>[AI ì‚¬ê±´ ì¦ê±° ìˆ˜ì§‘]</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ë³´ì„¸ìš”.<br>
            íƒ€ì„ë¼ì¸ ì¤‘ê°„ì— AIê°€ ë¶„ì„í•œ íŒŒë€ìƒ‰ ë°•ìŠ¤(AI ì¡°ì–¸)ê°€ ë³´ì´ì‹œë‚˜ìš”?
          </p>
          
          <div class="m-action-area">
            <div class="interaction-box">
              <p class="q-label">Q. AIê°€ ì´ ì‚¬ê±´ì— ë¶™ì—¬ì¤€ 'ì‹¬ê°ë„ ë°°ì§€(Badge)'ëŠ” ë¬´ì—‡ì´ì—ˆë‚˜ìš”?</p>
              <div class="choice-group" id="q2-options">
                <button onclick="selectOption(2, 'info')" class="choice-btn">â„¹ï¸ INFO (ë‹¨ìˆœ ì •ë³´)</button>
                <button onclick="selectOption(2, 'warn')" class="choice-btn">âš ï¸ WARN (ì£¼ì˜ í•„ìš”)</button>
              </div>
              <button onclick="completeMission(2)" id="btn-complete-2" class="btn-check" disabled>ì •ë‹µì„ ì„ íƒí•˜ì„¸ìš”</button>
            </div>
          </div>
        </div>
        <div class="lock-overlay">ğŸ”’ ì´ì „ ë‹¨ê³„ë¥¼ ì™„ë£Œí•´ ì£¼ì„¸ìš”</div>
      </div>

      <div class="mission-card locked" id="mission-3">
        <div class="m-status">STEP 03</div>
        <div class="m-content">
          <h3>ë‚´ êµì§ ìƒëª…ì„ ì§€ì¼œì¤„ 'PDF' ë½‘ê¸°</h3>
          <p>
            ìš°ì¸¡ ìƒë‹¨ <strong>[í˜ì´í¼]</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ê³  <strong>[PDFë¡œ ì €ì¥]</strong>ì„ í•´ë³´ì„¸ìš”.<br>
            êµìœ¡ì²­ì— ë°”ë¡œ ì œì¶œí•  ìˆ˜ ìˆëŠ” ì™„ë²½í•œ ì–‘ì‹ì„ í™•ì¸í•˜ì…¨ë‚˜ìš”?
          </p>
          
          <div class="m-action-area">
            <div class="interaction-box">
              <p class="q-label">Q. ë¬¸ì„œ ë§¨ ì•„ë˜ì— ìˆëŠ” 'ì´ê²ƒ' ë•Œë¬¸ì— ìœ„ë³€ì¡°ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë¬´ì—‡ì¼ê¹Œìš”?</p>
              <div class="choice-group" id="q3-options">
                <button onclick="selectOption(3, 'stamp')" class="choice-btn">ğŸ’® í•™êµì¥ ì§ì¸</button>
                <button onclick="selectOption(3, 'hash')" class="choice-btn">ğŸ” ë¬´ê²°ì„± í•´ì‹œ(Hash) ì½”ë“œ</button>
              </div>
              <button onclick="completeMission(3)" id="btn-complete-3" class="btn-check" disabled>ì •ë‹µì„ ì„ íƒí•˜ì„¸ìš”</button>
            </div>
          </div>
        </div>
        <div class="lock-overlay">ğŸ”’ ì´ì „ ë‹¨ê³„ë¥¼ ì™„ë£Œí•´ ì£¼ì„¸ìš”</div>
      </div>

      <div class="mission-card locked" id="mission-4">
        <div class="m-status">FINAL</div>
        <div class="m-content">
          <h3>RoosyCozy 1ê¸° ìš”ì› ë“±ë¡</h3>
          <p>ëª¨ë“  ë°©ì–´ í›ˆë ¨ì„ ë§ˆì¹˜ì…¨ìŠµë‹ˆë‹¤.<br>ë§ˆì§€ë§‰ìœ¼ë¡œ ì„¤ë¬¸ì— ì°¸ì—¬í•˜ê³  'ì•ˆì‹¬ êµì‚¬' ì¸ì¦ì„œë¥¼ ë°›ì•„ê°€ì„¸ìš”.</p>
          <div class="m-action-area">
             <a href="https://forms.google.com" target="_blank" class="btn-primary full-width" onclick="completeMission(4)">ğŸ“‹ êµ¬ê¸€ ì„¤ë¬¸ ì œì¶œí•˜ê³  ì¸ì¦ë°›ê¸°</a>
          </div>
        </div>
        <div class="lock-overlay">ğŸ”’ ëª¨ë“  ë¯¸ì…˜ì„ ì™„ë£Œí•´ ì£¼ì„¸ìš”</div>
      </div>

      <div style="text-align: center; margin-top: 50px;">
        <button onclick="resetProgress()" style="color:#aaa; background:none; border:none; text-decoration:underline; cursor:pointer; font-size:0.8rem;">[í…ŒìŠ¤íŠ¸ìš©] ì§„í–‰ ìƒí™© ì´ˆê¸°í™”</button>
      </div>

    </section>

    <div id="congrats-modal" class="modal-overlay" style="display: none;">
      <div class="modal-card">
        <div class="modal-icon">ğŸ‰</div>
        <h2>ì¶•í•˜í•©ë‹ˆë‹¤!</h2>
        <p><strong>Project Essential Record</strong>ë¥¼ ì™„ì£¼í•˜ì…¨ìŠµë‹ˆë‹¤.<br>ì´ì œ ì„ ìƒë‹˜ì˜ ê¸°ë¡ì€ ê°€ì¥ ì•ˆì „í•˜ê²Œ ë³´í˜¸ë©ë‹ˆë‹¤.</p>
        <button onclick="closeModal()" class="btn-primary">ë‹«ê¸°</button>
      </div>
    </div>
  </main>

  <script>
    // 1. ìœ íš¨ ì½”ë“œ ë° ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í‚¤ ì„¤ì •
    const STORAGE_KEY = 'roosy_beta_v2'; // ë²„ì „ ë³€ê²½ ì‹œ í‚¤ ë³€ê²½ ì¶”ì²œ
    const validCodes = [];
    for (let i = 1; i <= 30; i++) validCodes.push(`RC-BETA-${i.toString().padStart(3, '0')}`);

    let currentUser = null;
    let currentStep = 1;

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°ì´í„° í™•ì¸
    window.onload = function() {
      const savedData = JSON.parse(localStorage.getItem(STORAGE_KEY));
      if (savedData && validCodes.includes(savedData.user)) {
        currentUser = savedData.user;
        loginSuccess(currentUser);
        restoreProgress(savedData.step);
      }
    };

    function attemptLogin() {
      const input = document.getElementById('accessCode');
      const code = input.value.trim().toUpperCase();
      if (validCodes.includes(code)) {
        currentUser = code;
        currentStep = 1;
        saveData();
        loginSuccess(code);
      } else {
        const msg = document.getElementById('login-msg');
        msg.innerText = "ìœ íš¨í•˜ì§€ ì•Šì€ ì½”ë“œì…ë‹ˆë‹¤.";
        input.classList.add('shake');
        setTimeout(() => input.classList.remove('shake'), 500);
      }
    }

    function loginSuccess(userId) {
      document.getElementById('login-screen').style.display = 'none';
      document.getElementById('dashboard').style.display = 'block';
      document.getElementById('user-id-display').innerText = userId;
    }

    function saveData() {
      if(!currentUser) return;
      localStorage.setItem(STORAGE_KEY, JSON.stringify({
        user: currentUser,
        step: currentStep
      }));
    }

    function restoreProgress(step) {
      currentStep = step;
      for (let i = 1; i < step; i++) markAsDoneUI(i);
      if (step <= 4) activateStepUI(step);
      updateProgressBar(step);
      if (step > 4) {
        markAsDoneUI(4);
        updateProgressBar(5);
      }
    }

    // â˜… ì •ë‹µ ì²´í¬ ë¡œì§ (í•µì‹¬) â˜…
    function selectOption(step, value) {
      // 1. ì„ íƒ ìŠ¤íƒ€ì¼ ì ìš©
      const group = document.getElementById(`q${step}-options`);
      const btns = group.querySelectorAll('.choice-btn');
      btns.forEach(btn => btn.classList.remove('selected'));
      event.target.classList.add('selected');

      const btnComplete = document.getElementById(`btn-complete-${step}`);

      // 2. ì •ë‹µ ì—¬ë¶€ í™•ì¸
      let isCorrect = false;
      if (step === 1 && value === 'shortcut') isCorrect = true; // Ctrl+Enter
      if (step === 2 && value === 'warn') isCorrect = true;     // WARN ë°°ì§€
      if (step === 3 && value === 'hash') isCorrect = true;     // ë¬´ê²°ì„± í•´ì‹œ

      // 3. ë²„íŠ¼ ìƒíƒœ ë³€ê²½
      if (isCorrect) {
        btnComplete.disabled = false;
        btnComplete.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤! (ë‹¤ìŒ ë‹¨ê³„ë¡œ)";
        btnComplete.classList.add('ready');
      } else {
        btnComplete.disabled = true;
        btnComplete.innerText = "ë‹¤ì‹œ í™•ì¸í•´ ë³´ì„¸ìš” (ì˜¤ë‹µ)";
        btnComplete.classList.remove('ready');
      }
    }

    function completeMission(step) {
      markAsDoneUI(step);
      const nextStep = step + 1;
      currentStep = nextStep;
      saveData();

      if (nextStep <= 4) {
        activateStepUI(nextStep);
        updateProgressBar(nextStep);
        setTimeout(() => {
            document.getElementById(`mission-${nextStep}`).scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 300);
      } else {
        updateProgressBar(5); // 100%
        showCongrats();
      }
    }

    function activateStepUI(step) {
      const card = document.getElementById(`mission-${step}`);
      if(card) { card.classList.remove('locked'); card.classList.add('active'); }
    }

    function markAsDoneUI(step) {
      const card = document.getElementById(`mission-${step}`);
      if(card) {
        card.classList.remove('active', 'locked');
        card.classList.add('completed');
        const btns = card.querySelectorAll('button, a');
        btns.forEach(el => {
            el.disabled = true;
            if(el.tagName === 'BUTTON' && el.classList.contains('btn-check')) {
                el.innerText = "ë¯¸ì…˜ í´ë¦¬ì–´";
            }
        });
      }
    }

    function updateProgressBar(step) {
      let percent = 0;
      if (step > 1) percent = ((step - 1) / 4) * 100;
      if (step > 4) percent = 100;
      document.getElementById('progressBar').style.width = `${percent}%`;
      document.getElementById('progress-text').innerText = `${Math.round(percent)}%`;
    }

    function showCongrats() {
      setTimeout(() => { document.getElementById('congrats-modal').style.display = 'flex'; }, 500);
    }
    function closeModal() { document.getElementById('congrats-modal').style.display = 'none'; }
    function resetProgress() {
      localStorage.removeItem(STORAGE_KEY);
      alert("ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤.");
      location.reload();
    }

    document.getElementById('accessCode').addEventListener('keypress', function (e) {
      if (e.key === 'Enter') attemptLogin();
    });
  </script>
</body>
</html>